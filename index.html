<!DOCTYPE html>
<html lang="ko"><head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width,initial-scale=1,shrink-to-fit=no">
	<meta name="keywords" content="소녀전선,소전,GFL,girls' frontline,db,database,디비,데이터베이스,시뮬레이터,계산기,simulator,calcurator">
	<meta name="description" content="Girls' FrontLine Bingo Calculator">
	<link rel="icon" href="img/res.png">
	<!-- 카카오톡 출력용 -->
	<meta property="og:site_name" content="Girls' FrontLine Bingo Simulator">
	<meta property="og:url" content="/">
	<meta property="og:image" content="https://sf2031.com/gf-bingo-calculator/img/740X236.jpg">
	<meta property="og:title" content="Girls' FrontLine Bingo Calculator">
	<meta property="og:description" content="중복이라고 걱정하지 마세요">
	<!-- 페이스북 출력 이미지 -->
	<meta property="me2:image" content="/img/740X236.jpg">
	<!-- 트위터 출력용 -->
	<meta name="twitter:card" content="summary_large_image">
	<meta name="twitter:site" content="Girls' FrontLine Bingo Calculator">
	<meta name="twitter:title" content="Bingo Calculator">
	<meta name="twitter:image" content="https://sf2031.com/gf-bingo-calculator/img/740X236.jpg">
	<meta name="twitter:description" content="중복이라고 걱정하지 마세요">
	<title>Girls' FrontLine Bingo Calculator</title>
	<!-- Bootstrap core CSS -->
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.1.3/dist/css/bootstrap.min.css">
</head>
<body>
	<nav class="navbar navbar-dark bg-warning text-dark">
		<a class="navbar-brand">소녀전선 빙고 이벤트 확률 계산기</a>
	</nav>
	<div class="p-1 container">
		<div class="alert alert-danger">
		<button type="button" class="btn btn-danger" data-toggle="modal" data-target="#expModal1">※사용법</button> - 클릭해서 읽어보세요!
		</div>
		<table class="table table-dark table-hover m-auto" id="bingo">
			<tbody>
			<tr>
				<td data-value="1"></td>
				<td data-value="2"></td>
				<td data-value="3"></td>
				<td data-value="4"></td>
				<td data-value="5"></td>
				<td data-value="6"></td>
			</tr>
			<tr>
				<td data-value="7"></td>
				<td data-value="8"></td>
				<td data-value="9"></td>
				<td data-value="10"></td>
				<td data-value="11"></td>
				<td data-value="12"></td>
			</tr>
			<tr>
				<td data-value="13"></td>
				<td data-value="14"></td>
				<td data-value="15"></td>
				<td data-value="16"></td>
				<td data-value="17"></td>
				<td data-value="18"></td>
			</tr>
			<tr>
				<td data-value="19"></td>
				<td data-value="20"></td>
				<td data-value="21"></td>
				<td data-value="22"></td>
				<td data-value="23"></td>
				<td data-value="24"></td>
			</tr>
			<tr>
				<td data-value="25"></td>
				<td data-value="26"></td>
				<td data-value="27"></td>
				<td data-value="28"></td>
				<td data-value="29"></td>
				<td data-value="30"></td>
			</tr>
			<tr>
				<td data-value="31"></td>
				<td data-value="32"></td>
				<td data-value="33"></td>
				<td data-value="34"></td>
				<td data-value="35"></td>
				<td data-value="36"></td>
			</tr>
			</tbody>
		</table>
		<div class="col-xs-12 col-sm-8 mx-auto mt-4 row">
		<button id="run" type="button" class="btn btn-primary col">시작!</button>
		<button id="allr" type="button" class="btn btn-danger col-lg-2 mx-lg-1">모두지우기</button>
		<button id="alla" type="button" class="btn btn-success col-lg-2">모두채우기</button>
		<!-- Params -->
		<div>
			<div><span>잔여 일수</span></div>
			<input type="number" class="form-control" id="p-day" placeholder="14일">
		</div>
		<div>
			<div><span>일일 해독 횟수</span></div>
			<input type="number" class="form-control" id="p-ticket" placeholder="6번">
		</div>
		<div>
			<div><span>현재 중복 포인트</span></div>
			<input type="number" class="form-control" id="p-d" placeholder="0포인트">
		</div>
		<div>
			<div><span>수행 횟수</span></div>
			<input type="number" class="form-control" id="p-n" placeholder="10000번">
		</div>
		<div>
			<div><span>결과 출력 주기</span></div>
			<input type="number" class="form-control" id="p-show" placeholder="2500개마다">
		</div>
		<button id="resdel" type="button" class="btn btn-info col">결과 지우기</button>
		<div id="res" class="col-12"><div class="alert alert-dark col" role="alert">결과는 여기에 출력됩니다.</div></div>
		</div>
	</div>
	</div>
	<!-- Modal -->
	<div class="modal fade" id="expModal1" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
		<div class="modal-dialog modal-lg" role="document">
		<div class="modal-content">
			<div class="modal-header">
			<h5 class="modal-title" id="exampleModalLabel">설명충</h5>
			<button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
			</div>
			<div class="modal-body">
				<div class="jumbotron">
				<h1></h1>
				<p class="lead text-center">
					<a href="http://cafe.naver.com/girlsfrontlinekr/408268"><img class="img-fluid" src="img/740X236.jpg"></a>
					<ol>
					<li>현재 자신의 빙고판을 터치로 입력한다</li>
					<li>숫자는 달라도 상관없고 모양만 같으면 된다.</li>
					<li>시작!을 누른다.</li>
					</ol>
				</p>
				<!-- Button trigger modal -->
				<button type="button" class="btn btn-info" data-toggle="modal" data-target="#expModal2">원리 및 입력칸에 대한 설명</button>
				</div>
			</div>
			<div class="modal-footer">
			<button type="button" class="btn btn-secondary" data-dismiss="modal">닫기</button>
			</div>
		</div>
		</div>
	</div>
	<!-- Modal -->
	<div class="modal fade" id="expModal2" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
		<div class="modal-dialog" role="document">
		<div class="modal-content">
			<div class="modal-header">
			<h5 class="modal-title" id="exampleModalLabel">설명충</h5>
			<button type="button" class="close" data-dismiss="modal" aria-label="Close">
				<span aria-hidden="true">&times;</span>
			</button>
			</div>
			<div class="modal-body">
			<p>
				앞으로 빙고가 어떻게 진행될지 n번 임의로 시행한다<br>
				자세한 설명은 생략한다(<a href="https://ko.wikipedia.org/wiki/%EB%AA%AC%ED%85%8C%EC%B9%B4%EB%A5%BC%EB%A1%9C_%EB%B0%A9%EB%B2%95">몬테카를로 시뮬레이션</a>)<br><br>
			</p>
			<p>
				<b>잔여 일수</b> : 빙고 이벤트 마감까지 남은 일수<br><br>
				<b>일일 해독 횟수</b> : 남은 일수동안 하루에 시도하는 난수해독 횟수<br><br>
				<b>현재 중복 포인트</b> : 현재 보유하고 있는 중복 포인트의 량<br><br>
				<b>수행 횟수</b> : 잔여 일수x일일 해독 횟수의 계산을 몇번 수행해서 평균을 낼지<br><br>
				<b>결과 출력 주기</b> : 시행 횟수를 몇번에 나눠 걸쳐서 출력시킬지<br><br>
				<br><br>
				<b>n번 수행</b> : 잔여 일수x일일 해독 횟수 출력를 몇번 수행한 값인지, 기본 2500회마다 출력<br><br>
				<b>평균 빈칸 수</b> : 마지막까지 난수해독만 한 후 생기는 빈칸.<br><br>
				<b>14빙고 실패 확률</b> : 확정해독을 포함해서 14빙고(모든 칸 채우기)를 실패하는지 계산한다.
			</p>
			</div>
			<div class="modal-footer">
			<button type="button" class="btn btn-secondary" data-dismiss="modal">닫기</button>
			</div>
		</div>
		</div>
	</div>
	<!-- Bootstrap core JavaScript
	================================================== -->
	<!-- Placed at the end of the document so the pages load faster -->
	<script src="https://cdn.jsdelivr.net/npm/jquery@3.3.1/dist/jquery.min.js"></script>
	<script src="https://cdn.jsdelivr.net/npm/bootstrap@4.1.3/dist/js/bootstrap.bundle.min.js"></script>
	<script>
		var i;
		var tdlist=document.querySelectorAll("#bingo>tbody>tr>td");
		for(i of document.querySelectorAll("input")){i.setAttribute("min","0")};
		document.getElementById("bingo").style.width="320px";
		document.getElementById("bingo").style.height="320px";
		for(i of document.querySelectorAll("#bingo>tbody>tr")){
			i.classList.add("border-0");
			for(var a of i.querySelectorAll("td")){
				a.classList.add("border","border-secondary");
				a.addEventListener("click",(e)=>e.target.classList.toggle("bg-warning"))
			}
		};
		for(i of document.querySelectorAll("#run,#resdel,#run~button")){i.classList.add("my-1")};
		for(i of document.querySelectorAll("#alla~div")){
			i.classList.add("input-group","mt-2");
			i.querySelector("div").classList.add("input-group-prepend");
			if(i.querySelector("span")){i.querySelector("span").classList.add("input-group-text")}
		};
		document.getElementById("allr").addEventListener("click",()=>{for(i of document.querySelectorAll(".border-0>td")){i.classList.remove("bg-warning")}});
		document.getElementById("alla").addEventListener("click",()=>{for(i of document.querySelectorAll(".border-0>td")){i.classList.add("bg-warning")}});
		document.getElementById("resdel").addEventListener("click",()=>{document.getElementById("res").innerHTML=""});
		document.getElementById("run").addEventListener("click",()=>{
			// get params
			var day=document.getElementById("p-day").value||14,
				ticket=document.getElementById("p-ticket").value||6,
				d=document.getElementById("p-d").value/10||0,
				n=document.getElementById("p-n").value||10000,
				show=document.getElementById("p-show").value||2500,sum=0,loser=0,sum_d=0,dp=0;
			// run
			for(t=1;t<=n;t++){
				var fail=0,cnt=0,ary=[];
				for(i=1;i<=36;i++){ary[i]=0}
				for(var a of document.querySelectorAll("#bingo .bg-warning")){
					arr[i.getAttribute("data-value")]=1
					cnt++
				};
				for(i=1;i<=day*ticket;i++){
					if(cnt>=36){break}
					var tmp=Math.floor((Math.random()*36)+1);
					if(ary[tmp]==1){fail++}
					else{cnt++}
					ary[tmp]=1
				};
				fail=fail+d;
				if(cnt<36&&(fail/10)<(36-cnt)){loser++}
				sum+=cnt,sum_d+=fail;
				// print
				if(t%show==0){
					document.getElementById("res").insertAdjacentHTML('afterbegin',`<div class="alert alert-primary col-12" role="alert">${t}번 수행<br>평균 빈칸 수 : ${36-(sum/t)*1|0}개<br>올빙고 실패 확률 : ${loser/t*100}%<br>앞으로 획득하게 될 중복 포인트의 평균 : ${(sum_d)/t*10|0}포인트</div>`)
				}
			}
		});
	</script>
</body></html>